--테이블생성
CREATE TABLE BOARD_QNA(
QNA_NO NUMBER PRIMARY KEY NOT NULL,
ACCOUNT_ID VARCHAR2(60) NOT NULL,
QNA_TITLE VARCHAR2(60) NOT NULL,
QNA_TEXT VARCHAR2(3000) NOT NULL, 
QNA_TIME DATE NOT NULL);

--QnA입력
INSERT INTO BOARD_QNA(QNA_NO, ACCOUNT_ID, QNA_TITLE, QNA_TEXT,QNA_TIME) VALUES ( ?, ?, ?, ?, ?);							
String insertQnA = ""INSERT INTO BOARD_QNA( QNA_NO, ACCOUNT_ID, QNA_TITLE, QNA_TEXT, QNA_TIME)"" + ""VALUES(?, ?, ?, ?, ?)"";    
insertBOARD_QNA(preparedStatement 변수명, 1, ""id"", ""질문제목"", ""질문본문"", TIMESTAMP);"	

--QnA검색
SELECT * FROM BOARD_QNA WHERE ACCOUNT_ID = ?;
SELECT * FROM BOARD_QNA WHERE QNA_TITLE = %?%;
SELECT * FROM BOARD_QNA WHERE QNA_TEXT = %?%;

--QnA수정
UPDATE BOARD_QNA SET QNA_TITLE = ? WHERE QNA_NUMBER = ?;
UPDATE BOARD_QNA SET QNA_TEXT = ? WHERE QNA_NUMBER = ?;
String updateQtitle = "UPDATE BOARD_QNA SET QNA_TITLE = ? WHERE QNA_NUMBER = ?";
String updateQtext = "UPDATE BOARD_QNA SET QNA_TEXT = ? WHERE QNA_NUMBER = ?";

--QnA삭제
DELETE FROM BOARD_QNA WHERE ACCOUNT_ID = ?;
String deleteQnA = "DELETE FROM BOARD_QNA WHERE account_id = ?";

--시퀀스 생성
CREATE SEQUENCE board_qna_seq
    START WITH 1
    INCREMENT BY 1
    NOCACHE -- 추가적으로 넣고 필수는 아님
    NOCYCLE;

--게시글번호 트리거 생성
CREATE OR REPLACE TRIGGER qnapost_trigger
BEFORE INSERT ON board_qna
FOR EACH ROW
BEGIN
    SELECT board_qna_seq.NEXTVAL
    INTO:NEW.qna_no
    FROM dual;
END;
/

--게시글 업데이트시 시간변경 트리거 생성
CREATE OR REPLACE TRIGGER qnaupdate_trigger
	BEFORE UPDATE OF qna_title OR UPDATE OF qna_text ON board_qna
	FOR EACH ROW
	
	BEGIN
		:new.qna_time := CURRENT_TIMESTAMP;
	END;
/